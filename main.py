import streamlit as st
import folium
from streamlit_folium import st_folium

st.set_page_config(page_title="ì¼ë³¸ ê´€ê´‘ì§€ ê°€ì´ë“œ", layout="wide")

# ê´€ê´‘ì§€ ì •ë³´
tourist_spots = {
    "ë„ì¿„": {
        "ìœ„ì¹˜": [35.682839, 139.759455],
        "ì„¤ëª…": "ì¼ë³¸ì˜ ìˆ˜ë„ ë„ì¿„ëŠ” í˜„ëŒ€ì„±ê³¼ ì „í†µì´ ê³µì¡´í•˜ëŠ” ë„ì‹œì…ë‹ˆë‹¤. ì‡¼í•‘, ìŒì‹, ì—­ì‚¬ì ì¸ ì‚¬ì› ë“± ë‹¤ì–‘í•œ ë§¤ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
        "ëª…ì†Œ": {
            "ë„ì¿„íƒ€ì›Œ": {"ìœ„ì¹˜": [35.6586, 139.7454], "ì„¤ëª…": "íŒŒë¦¬ì˜ ì—í íƒ‘ì„ ë³¸ë”° ë§Œë“  ë„ì¿„ì˜ ëœë“œë§ˆí¬"},
            "ì•„ì‚¬ì¿ ì‚¬": {"ìœ„ì¹˜": [35.7148, 139.7967], "ì„¤ëª…": "ì„¼ì†Œì§€ ì‚¬ì›ê³¼ ì „í†µ ìƒì ì´ ìœ ëª…í•œ ì§€ì—­"},
            "ì‹œë¶€ì•¼ ìŠ¤í¬ë¨ë¸”": {"ìœ„ì¹˜": [35.6595, 139.7005], "ì„¤ëª…": "ì„¸ê³„ì—ì„œ ê°€ì¥ ë¶„ì£¼í•œ êµì°¨ë¡œ ì¤‘ í•˜ë‚˜"}
        }
    },
    "êµí† ": {
        "ìœ„ì¹˜": [35.0116, 135.7681],
        "ì„¤ëª…": "ì˜› ìˆ˜ë„ êµí† ëŠ” ìˆ˜ë§ì€ ì ˆê³¼ ì‹ ì‚¬, ì „í†µ ê±´ì¶•ë¬¼ë“¤ì´ ëª¨ì—¬ ìˆëŠ” ì—­ì‚¬ì ì¸ ë„ì‹œì…ë‹ˆë‹¤.",
        "ëª…ì†Œ": {
            "ê¸°ìš”ë¯¸ì¦ˆë°ë¼": {"ìœ„ì¹˜": [34.9949, 135.7850], "ì„¤ëª…": "ì‚° ì¤‘í„±ì— ìœ„ì¹˜í•œ ìœ ëª…í•œ ì‚¬ì°°"},
            "ê¸ˆê°ì‚¬": {"ìœ„ì¹˜": [35.0394, 135.7292], "ì„¤ëª…": "í™©ê¸ˆìœ¼ë¡œ ë®ì¸ ì•„ë¦„ë‹¤ìš´ ì ˆ"},
            "í›„ì‹œë¯¸ ì´ë‚˜ë¦¬ ì‹ ì‚¬": {"ìœ„ì¹˜": [34.9671, 135.7727], "ì„¤ëª…": "ìˆ˜ì²œ ê°œì˜ ë¶‰ì€ ë„ë¦¬ì´ ë¬¸ìœ¼ë¡œ ìœ ëª…"}
        }
    },
    "ì˜¤ì‚¬ì¹´": {
        "ìœ„ì¹˜": [34.6937, 135.5023],
        "ì„¤ëª…": "í™œê¸°ì°¬ ë¶„ìœ„ê¸°ì™€ ë§›ìˆëŠ” ê±°ë¦¬ ìŒì‹ìœ¼ë¡œ ìœ ëª…í•œ ì¼ë³¸ ì œ2ì˜ ë„ì‹œ.",
        "ëª…ì†Œ": {
            "ì˜¤ì‚¬ì¹´ì„±": {"ìœ„ì¹˜": [34.6873, 135.5262], "ì„¤ëª…": "ë„ìš”í† ë¯¸ íˆë°ìš”ì‹œê°€ ê±´ì„¤í•œ ì—­ì‚¬ì  ì„±"},
            "ë„í†¤ë³´ë¦¬": {"ìœ„ì¹˜": [34.6687, 135.5012], "ì„¤ëª…": "ë„¤ì˜¨ì‚¬ì¸ê³¼ ê±°ë¦¬ ìŒì‹ìœ¼ë¡œ ìœ ëª…í•œ ê´€ê´‘ì§€"},
            "ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬": {"ìœ„ì¹˜": [34.6654, 135.4323], "ì„¤ëª…": "ì¸ê¸° í…Œë§ˆíŒŒí¬"}
        }
    }
}

# ì‚¬ì´ë“œë°”ì—ì„œ ë„ì‹œ ì„ íƒ
st.sidebar.title("ğŸ‡¯ğŸ‡µ ì¼ë³¸ ì£¼ìš” ë„ì‹œ")
selected_city = st.sidebar.selectbox("ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”", list(tourist_spots.keys()))

# ì„ íƒëœ ë„ì‹œ ì •ë³´
city_info = tourist_spots[selected_city]
st.title(f"ğŸ‡¯ğŸ‡µ {selected_city} ê´€ê´‘ ê°€ì´ë“œ")
st.markdown(city_info["ì„¤ëª…"])

# ê´€ê´‘ì§€ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ (ì§€ë„ ìœ„ì—)
st.subheader("ğŸ“Œ ì¶”ì²œ ê´€ê´‘ì§€ ëª©ë¡")
for name, spot in city_info["ëª…ì†Œ"].items():
    st.markdown(f"- **{name}**: {spot['ì„¤ëª…']}")

# ì§€ë„ ìƒì„±
m = folium.Map(
    location=city_info["ìœ„ì¹˜"],
    zoom_start=12,
    tiles='OpenStreetMap',  # ì˜ì–´ íƒ€ì¼
    attr='Â© OpenStreetMap contributors'
)

# ì¤‘ì‹¬ ë§ˆì»¤
folium.Marker(
    city_info["ìœ„ì¹˜"],
    popup=f"{selected_city} ì¤‘ì‹¬",
    icon=folium.Icon(color='blue')
).add_to(m)

# ê´€ê´‘ì§€ ë§ˆì»¤ ì¶”ê°€
for name, spot in city_info["ëª…ì†Œ"].items():
    folium.Marker(
        location=spot["ìœ„ì¹˜"],
        popup=f"<b>{name}</b><br>{spot['ì„¤ëª…']}",
        tooltip=name,
        icon=folium.Icon(color='red', icon="info-sign")
    ).add_to(m)

# ì§€ë„ ì¶œë ¥
st.subheader("ğŸ—ºï¸ ê´€ê´‘ì§€ë„")
st_data = st_folium(m, width=800, height=500)

# ê´€ê´‘ì§€ ìƒì„¸ ì„¤ëª… (ì•„ë˜ìª½)
st.subheader("ğŸ” ëª…ì†Œë³„ ìƒì„¸ ì„¤ëª…")
for name, spot in city_info["ëª…ì†Œ"].items():
    with st.expander(f"{name}"):
        st.write(spot["ì„¤ëª…"])
